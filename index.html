
<!DOCTYPE html>
<html>
<style>
table, th, td {
  border:1px solid black;
}
</style>
<body>

<!-- Here a loader is created which 
               loads till response comes -->
  <div class="d-flex justify-content-center">
    <div class="spinner-border"
   role="status" id="loading">
    <span class="sr-only">Loading...</span>
    </div>
    </div>
    <h1>Registered Suppliers</h1>
    <!-- table for showing data -->
    <table id="employees"></table>

	<h1>Registered Category1</h1>
    <!-- table for showing data -->
    <table id="category1"></table>
</body>

<script>

function UploadData(){
	let xhr = new XMLHttpRequest();
xhr.open("POST", "https://ogoori.decarbonify.com/api/scope3/category/1/");
xhr.setRequestHeader("Accept", "application/json");
xhr.setRequestHeader("Content-Type", "application/json");

xhr.onreadystatechange = function () {
  if (xhr.readyState === 4) {
    console.log(xhr.status);
    console.log(xhr.responseText);
  }};

let data = `{
 "date":"2022-12-15",
  "Quantity_purchased": "3400 Kg",
  "product_id": 2,
  "supplier_id": 2
}`;

xhr.send(data);
}
//UploadData();





  // api url
const api_url =
	"https://ogoori.decarbonify.com/api/scope3/category/1/?format=json";

// Defining async function
async function getapi(url) {
	
	// Storing response
	const response = await fetch(url);
	
	// Storing data in form of JSON
	var data = await response.json();
	console.log(data);
	
	if (response) {
		
		hideloader();
	}
	show(data);
	show_category1(data);
	
}
// Calling that async function
getapi(api_url);

// Function to hide the loader
function hideloader() {
	document.getElementById('loading').style.display = 'none';
}
// Function to define innerHTML for HTML table
function show(data) {
	let tab =
		'<tr> <th>supplier_id</th> <th>supplier_name</th> <th>email</th> 	<th>supplying_category</th> 	</tr>';
	
	// Loop to access all rows
	for (let i =0; i<data.length;i++) {
		
		tab += '<tr> <td>'+data[i].supplier_id+' </td> <td>'+data[i].supplier_name+'</td> <td>'+data[i].email+'</td> <td>'+data[i].supplying_category+'</td>		</tr>';
	}
	// Setting innerHTML as tab variable
	document.getElementById("employees").innerHTML = tab;
}
// Function to define innerHTML for HTML table
function show_category1(data) {
	let tab =
		'<tr> <th>date</th> <th>Quantity_purchased</th> <th>supplier_id</th>  <th>product_id</th> 	</tr>';
	
	// Loop to access all rows
	for (let i =0; i<data.length;i++) {
		
		tab += '<tr> <td>'+data[i].date+' </td> <td>'+data[i].Quantity_purchased+'</td>	 <td>'+data[i].supplier_id+'</td> <td>'+data[i].product_id+'</td></tr>';
	}
	// Setting innerHTML as tab variable
	document.getElementById("category1").innerHTML = tab;
}



</script>


</html>
